# Git仓同步工具
这是一个用于同步git仓库的工具。

## 用法
这个项目已经部署到流水线上了，所以clone代码然后修改其中的`config.yaml`文件再将改动push到主分支上即可完成对同步工具的设置。

## 设置说明
config.yaml 中分为三个部分，一个是全局配置`common`，一个是仓库设置`repos`，还有一个是帐号设置`auths`。

### common
`common`部分是全局设置，在这里可以对同步工具进行全局设置。其设置会应用在每一个`repo`上面。具体配置说明如下：

| 名称         | 类型   | 描述                                                                     |
| ------------ | ------ | ------------------------------------------------------------------------ |
| frequency    | string | 同步的时间间隔，只能使用[cron表达式](https://en.wikipedia.org/wiki/Cron) |
| is_force     | bool   | 是否强制push，这个功能还没完成，目前总是强制push的                       |
| is_sync_tags | bool   | 是否同步tag                                                              |

### repos
`repos`部分是待同步仓库设置，在这里可以设置需要同步的仓库源和目标仓库。`repos`本身是数组类型的字段，需要将仓库设置以数组的形式写在`repos`字段中。其中，仓库设置中可以使用全部的全局设置。
具体配置说明如下：

| 名称          | 类型   | 描述                                  |
| ------------- | ------ | ------------------------------------- |
| origin        | string | 待同步的仓库。不支持ssh格式的地址     |
| origin_branch | string | 待同步的仓库分支。                    |
| target        | string | 同步到的目的仓库。不支持ssh格式的地址 |
| target_branch | string | 同步到的目的仓库分支。                |
| 其他          | 无     | `common`中的全部配置                  |

### auths
`auths`部分是帐号设置，在这里可以设置访问仓库所需要的帐号，帐号顺序越靠前越优先匹配。目前只支持帐号密码的形式。和`repos`一样，`auths`也是数组类型的。

| 名称     | 类型   | 描述                  |
| -------- | ------ | --------------------- |
| group    | string | 需要帐号密码的git组织 |
| username | string | 组织需要的用户名      |
| password | string | 组织需要的密码        |